---
title: 'Crime In Baltimore'
date: '`r Sys.Date()`'
output:
  html_document:
    number_sections: true
    fig_caption: true
    toc: true
    fig_width: 7
    fig_height: 4.5
    theme: cosmo
    highlight: tango
    ##code_folding: hide
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE, echo=FALSE}
knitr::opts_chunk$set(
	echo = TRUE,
	message = FALSE,
	warning = FALSE
)
```

# - Team Members
* Oytun Deniz
* Selen Korkut Ozer
* Samet Boyaci
* Yigitcan Tunay

# - Introduction

Violent crime in the United States has fallen over the last two decades. Even though the violent crime rate has been decreasing since 1990, the United States top the ranking of countries with the most prisoners. And Baltimore, Maryland is infamous for its very high crime rates. According to Forbes, Baltimore is the seventh dangerous city in the cities of United States. The violent crime rate is 1417 per 100.000 residents in a population of 626.848 people in 2017 so Baltimore is the one of the cities which is carrying high risk for local people. That is why, we thought that it would be interesting to analyze crimes in Baltimore.

# - Project Details

Something

# - Preparation

## - Loading Data

```{r}
setwd('~/gitProjects/DAE/')
bcd <- read.csv('Baltimore_Crime_Data.csv')
str(bcd)
```

## - Loading Libraries

```{r}
library("data.table")
library("ggplot2")
library("dplyr")
library("ggplot2")
library("ggmap")
library("maps")
library("mapdata")
library("sqldf")
```

## - Reformating features

### - Dates
```{r}
bcd$CrimeDate<-as.Date(bcd$CrimeDate,format="%m/%d/%Y")
bcd$CrimeTimehour<- as.integer(substr(bcd$CrimeTime,0,2))
bcd$Year <- as.numeric (format(bcd$CrimeDate,"%Y"))
bcd$Month=as.numeric (format(bcd$CrimeDate,"%m"))
bcd$Day=as.numeric (format(bcd$CrimeDate,"%d"))

```

### - Inside.OutSide
* The blank outside.inside rows are set as NA
* Inside.Outside column has 4 unique rows. O, I, Outside, Inside. We standardized these rows as O -> Outside, I -> Inside

```{r}
bcd$Inside.Outside[bcd$Inside.Outside=="O"] <- "Outside"
bcd$Inside.Outside[bcd$Inside.Outside=="I"] <- "Inside"
bcd$Inside.Outside[bcd$Inside.Outside==""] <- NA
```

### - Location
* The blank location rows are set as NA

```{r}
bcd$Location[bcd$Location==''] <- NA
```


## - New Features
We created 2 features

* Crime Group
* Crime Score
* Crime TimeLine

### - Crime Group

```{r}
bcd$CrimeGroup[like(bcd$Description,"ROBBERY")] <- "ROBBERY"
bcd$CrimeGroup[like(bcd$Description,"ASSAULT")] <- "ASSAULT"
bcd$CrimeGroup[like(bcd$Description,"LARCENY")] <- "LARCENY"
bcd$CrimeGroup[like(bcd$Description,"ARSON")] <- "ARSON"
bcd$CrimeGroup[like(bcd$Description,"RAPE")] <- "RAPE"
bcd$CrimeGroup[like(bcd$Description,"SHOOTING")] <- "SHOOTING"
bcd$CrimeGroup[like(bcd$Description,"AUTO THEFT")] <- "AUTO THEFT"
bcd$CrimeGroup[like(bcd$Description,"HOMICIDE")] <- "HOMICIDE"
bcd$CrimeGroup[like(bcd$Description,"BURGLARY")] <- "BURGLARY"
```

### - Crime Score

Crime score range is 1 to 10

```{r}
bcd$CrimeScore[like(bcd$Description,"ROBBERY - RESIDENCE")] <- 5 
bcd$CrimeScore[like(bcd$Description,"AUTO THEFT")] <-4
bcd$CrimeScore[like(bcd$Description,"SHOOTING")] <-8
bcd$CrimeScore[like(bcd$Description,"AGG. ASSAULT")] <-6
bcd$CrimeScore[like(bcd$Description,"COMMON ASSAULT")] <-4
bcd$CrimeScore[like(bcd$Description,"BURGLARY")] <-10
bcd$CrimeScore[like(bcd$Description,"HOMICIDE")] <-10
bcd$CrimeScore[like(bcd$Description,"ROBBERY - STREET")] <-4
bcd$CrimeScore[like(bcd$Description,"ROBBERY - COMMERCIAL")] <-5
bcd$CrimeScore[like(bcd$Description,"LARCENY")] <-2
bcd$CrimeScore[like(bcd$Description,"LARCENY FROM AUTO")] <-1
bcd$CrimeScore[like(bcd$Description,"ARSON")] <-6
bcd$CrimeScore[like(bcd$Description,"ROBBERY - CARJACKING")] <-3
bcd$CrimeScore[like(bcd$Description,"ASSAULT BY THREAT")] <-1
bcd$CrimeScore[like(bcd$Description,"RAPE")] <-7

bcd$CrimeScore <- as.factor(bcd$CrimeScore)
```

### Crime Time Line

We created 4 level from Crime Time Hour feature

00:00 - 06:00, 06:00 - 12:00, 12:00 - 18:00, 18:00 - 24:00

```{r}
bcd$CrimeTimeLine <- cut(bcd$CrimeTimehour, breaks=c(0,6,12,18,24), right=TRUE)
```




